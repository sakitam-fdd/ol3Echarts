"use strict";(self.webpackChunkol_echarts_docs=self.webpackChunkol_echarts_docs||[]).push([[401],{8002:(t,e,i)=>{i.d(e,{A:()=>nt});i(3739);var n=i(7378),o=i(9231),s=i(247),r=i(8675),a=i(3682),h=i(5209),c=i(3264),p=i(9255),u=i(8941),l=i(6365),d=i(3698),y=i(9091),f=i(5505),g=i(6859),m=i(4347),v=(i(7289),i(5191)),w=i(9532),x=i(6916);function _(t,e,i){var n=e[0]*i[0]+e[2]*i[1],o=e[1]*i[0]+e[3]*i[1],s=e[0]*i[2]+e[2]*i[3],r=e[1]*i[2]+e[3]*i[3],a=e[0]*i[4]+e[2]*i[5]+e[4],h=e[1]*i[4]+e[3]*i[5]+e[5];return t[0]=n,t[1]=o,t[2]=s,t[3]=r,t[4]=a,t[5]=h,t}function S(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t}function $(t,e,i){var n=e[0],o=e[1];return t[0]=i[0]*n+i[2]*o+i[4],t[1]=i[1]*n+i[3]*o+i[5],t}var E=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},M=5e-5;function b(t){return t>M||t<-5e-5}var T=[],A=[],C=[1,0,0,1,0,0],R=Math.abs,O=function(){function t(){}var e;return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},t.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},t.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},t.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},t.prototype.needLocalTransform=function(){return b(this.rotation)||b(this.x)||b(this.y)||b(this.scaleX-1)||b(this.scaleY-1)||b(this.skewX)||b(this.skewY)},t.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),i=this.transform;e||t?(i=i||[1,0,0,1,0,0],e?this.getLocalTransform(i):E(i),t&&(e?_(i,t,i):function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]}(i,t)),this.transform=i,this._resolveGlobalScaleRatio(i)):i&&(E(i),this.invTransform=null)},t.prototype._resolveGlobalScaleRatio=function(t){var e,i,n,o,s,r,a,h,c,p=this.globalScaleRatio;if(null!=p&&1!==p){this.getGlobalScale(T);var u=T[0]<0?-1:1,l=T[1]<0?-1:1,d=((T[0]-u)*p+u)/T[0]||0,y=((T[1]-l)*p+l)/T[1]||0;t[0]*=d,t[1]*=d,t[2]*=y,t[3]*=y}this.invTransform=this.invTransform||[1,0,0,1,0,0],e=this.invTransform,n=(i=t)[0],o=i[2],s=i[4],r=i[1],a=i[3],h=i[5],(c=n*a-r*o)&&(c=1/c,e[0]=a*c,e[1]=-r*c,e[2]=-o*c,e[3]=n*c,e[4]=(o*h-a*s)*c,e[5]=(r*s-n*h)*c)},t.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},t.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],i=t[2]*t[2]+t[3]*t[3],n=Math.atan2(t[1],t[0]),o=Math.PI/2+n-Math.atan2(t[3],t[2]);i=Math.sqrt(i)*Math.cos(o),e=Math.sqrt(e),this.skewX=o,this.skewY=0,this.rotation=-n,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=i,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||[1,0,0,1,0,0],_(A,t.invTransform,e),e=A);var i=this.originX,n=this.originY;(i||n)&&(C[4]=i,C[5]=n,_(A,e,C),A[4]-=i,A[5]-=n,e=A),this.setLocalTransform(e)}},t.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},t.prototype.transformCoordToLocal=function(t,e){var i=[t,e],n=this.invTransform;return n&&$(i,i,n),i},t.prototype.transformCoordToGlobal=function(t,e){var i=[t,e],n=this.transform;return n&&$(i,i,n),i},t.prototype.getLineScale=function(){var t=this.transform;return t&&R(t[0]-1)>1e-10&&R(t[3]-1)>1e-10?Math.sqrt(R(t[0]*t[3]-t[2]*t[1])):1},t.prototype.copyTransform=function(t){!function(t,e){for(var i=0;i<V.length;i++){var n=V[i];t[n]=e[n]}}(this,t)},t.getLocalTransform=function(t,e){e=e||[];var i=t.originX||0,n=t.originY||0,o=t.scaleX,s=t.scaleY,r=t.anchorX,a=t.anchorY,h=t.rotation||0,c=t.x,p=t.y,u=t.skewX?Math.tan(t.skewX):0,l=t.skewY?Math.tan(-t.skewY):0;if(i||n||r||a){var d=i+r,y=n+a;e[4]=-d*o-u*y*s,e[5]=-y*s-l*d*o}else e[4]=e[5]=0;return e[0]=o,e[3]=s,e[1]=l*o,e[2]=u*s,h&&function(t,e,i,n){void 0===n&&(n=[0,0]);var o=e[0],s=e[2],r=e[4],a=e[1],h=e[3],c=e[5],p=Math.sin(i),u=Math.cos(i);t[0]=o*u+a*p,t[1]=-o*p+a*u,t[2]=s*u+h*p,t[3]=-s*p+u*h,t[4]=u*(r-n[0])+p*(c-n[1])+n[0],t[5]=u*(c-n[1])-p*(r-n[0])+n[1]}(e,e,h),e[4]+=i+c,e[5]+=n+p,e},t.initDefaultProps=((e=t.prototype).scaleX=e.scaleY=e.globalScaleRatio=1,void(e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0)),t}(),V=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];var X=function(){function t(t,e){this.x=t||0,this.y=e||0}return t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.scale=function(t){this.x*=t,this.y*=t},t.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},t.prototype.distance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},t.prototype.distanceSquare=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(t){if(t){var e=this.x,i=this.y;return this.x=t[0]*e+t[2]*i+t[4],this.y=t[1]*e+t[3]*i+t[5],this}},t.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},t.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},t.set=function(t,e,i){t.x=e,t.y=i},t.copy=function(t,e){t.x=e.x,t.y=e.y},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.lenSquare=function(t){return t.x*t.x+t.y*t.y},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.add=function(t,e,i){t.x=e.x+i.x,t.y=e.y+i.y},t.sub=function(t,e,i){t.x=e.x-i.x,t.y=e.y-i.y},t.scale=function(t,e,i){t.x=e.x*i,t.y=e.y*i},t.scaleAndAdd=function(t,e,i,n){t.x=e.x+i.x*n,t.y=e.y+i.y*n},t.lerp=function(t,e,i,n){var o=1-n;t.x=o*e.x+n*i.x,t.y=o*e.y+n*i.y},t}(),Y=Math.min,k=Math.max,P=new X,z=new X,Z=new X,F=new X,L=new X,N=new X,D=function(){function t(t,e,i,n){i<0&&(t+=i,i=-i),n<0&&(e+=n,n=-n),this.x=t,this.y=e,this.width=i,this.height=n}return t.prototype.union=function(t){var e=Y(t.x,this.x),i=Y(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=k(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=k(t.y+t.height,this.y+this.height)-i:this.height=t.height,this.x=e,this.y=i},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(t){var e=this,i=t.width/e.width,n=t.height/e.height,o=[1,0,0,1,0,0];return S(o,o,[-e.x,-e.y]),function(t,e,i){var n=i[0],o=i[1];t[0]=e[0]*n,t[1]=e[1]*o,t[2]=e[2]*n,t[3]=e[3]*o,t[4]=e[4]*n,t[5]=e[5]*o}(o,o,[i,n]),S(o,o,[t.x,t.y]),o},t.prototype.intersect=function(e,i){if(!e)return!1;e instanceof t||(e=t.create(e));var n=this,o=n.x,s=n.x+n.width,r=n.y,a=n.y+n.height,h=e.x,c=e.x+e.width,p=e.y,u=e.y+e.height,l=!(s<h||c<o||a<p||u<r);if(i){var d=1/0,y=0,f=Math.abs(s-h),g=Math.abs(c-o),m=Math.abs(a-p),v=Math.abs(u-r),w=Math.min(f,g),x=Math.min(m,v);s<h||c<o?w>y&&(y=w,f<g?X.set(N,-f,0):X.set(N,g,0)):w<d&&(d=w,f<g?X.set(L,f,0):X.set(L,-g,0)),a<p||u<r?x>y&&(y=x,m<v?X.set(N,0,-m):X.set(N,0,v)):w<d&&(d=w,m<v?X.set(L,0,m):X.set(L,0,-v))}return i&&X.copy(i,l?L:N),l},t.prototype.contain=function(t,e){var i=this;return t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return 0===this.width||0===this.height},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},t.applyTransform=function(e,i,n){if(n){if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var o=n[0],s=n[3],r=n[4],a=n[5];return e.x=i.x*o+r,e.y=i.y*s+a,e.width=i.width*o,e.height=i.height*s,e.width<0&&(e.x+=e.width,e.width=-e.width),void(e.height<0&&(e.y+=e.height,e.height=-e.height))}P.x=Z.x=i.x,P.y=F.y=i.y,z.x=F.x=i.x+i.width,z.y=Z.y=i.y+i.height,P.transform(n),F.transform(n),z.transform(n),Z.transform(n),e.x=Y(P.x,z.x,Z.x,F.x),e.y=Y(P.y,z.y,Z.y,F.y);var h=k(P.x,z.x,Z.x,F.x),c=k(P.y,z.y,Z.y,F.y);e.width=h-e.x,e.height=c-e.y}else e!==i&&t.copy(e,i)},t}();const I=t=>{const e=typeof t;return null!==t&&("object"===e||"function"===e)},j=(t,e)=>(Object.keys(e).forEach((i=>{I(e[i])&&I(t[i])?j(t[i],e[i]):t[i]=e[i]})),t),q=function(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t.apply(e,n.concat(Array.prototype.slice.call(o)))}},G=function(t,e){let i,n=0;const o=t.length;for(;n<o;n++)if(t[n].index===e.index){i=n;break}return void 0===i?t.push(e):t[i]=e,t},U=function(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()};function B(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function H(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function J(t,e){const i=new MouseEvent(t,{bubbles:!0,cancelable:!0,button:e.pointerEvent.button,buttons:e.pointerEvent.buttons,clientX:e.pointerEvent.clientX,clientY:e.pointerEvent.clientY,movementX:e.pointerEvent.movementX,movementY:e.pointerEvent.movementY,relatedTarget:e.pointerEvent.relatedTarget,screenX:e.pointerEvent.screenX,screenY:e.pointerEvent.screenY,view:window});return i.zrX=e.pointerEvent.offsetX,i.zrY=e.pointerEvent.offsetY,i.event=i,i}const W=(t,e,i)=>{const n=[];let[o,s]=[e[0],e[1]];for(let r=0;r<t.length;r+=2){let e=t.charCodeAt(r)-64,a=t.charCodeAt(r+1)-64;e=e>>1^-(1&e),a=a>>1^-(1&a),e+=o,a+=s,o=e,s=a,n.push([e/i,a/i])}return n};function K(t){const e=(t=>{if((t=>!t.UTF8Encoding)(t))return t;let e=t.UTF8Scale;null==e&&(e=1024);const i=t.features;for(let n=0;n<i.length;n++){const t=i[n].geometry,[o,s]=[t.coordinates,t.encodeOffsets];for(let i=0;i<o.length;i++){const n=o[i];if("Polygon"===t.type)o[i]=W(n,s[i],e);else if("MultiPolygon"===t.type)for(let t=0;t<n.length;t++){const o=n[t];n[t]=W(o,s[i][t],e)}}}return t.UTF8Encoding=!1,t})(t);return{type:"FeatureCollection",crs:{},features:e.features.filter((t=>t.geometry&&t.properties&&t.geometry.coordinates.length>0)).map((t=>{const e=t.properties,i=t.geometry,n=i.coordinates,o=[];return"Polygon"===i.type&&o.push(n[0]),"MultiPolygon"===i.type&&n.forEach((t=>{t[0]&&o.push(t[0])})),{properties:e,type:"Feature",geometry:{type:"Polygon",coordinates:o}}}))}}var Q=Object.freeze({__proto__:null,bar:function(t,e,i){return I(t.grid)&&!Array.isArray(t.grid)?console.log(t):Array.isArray(t.grid)&&(t.grid=t.grid.map(((e,n)=>{const o=i.dataToPoint(t.series[n].coordinates);return e.left=o[0]-parseFloat(e.width)/2,e.top=o[1]-parseFloat(e.height)/2,e}))),e},line:function(t,e,i){return I(t.grid)&&!Array.isArray(t.grid)?console.log(t):Array.isArray(t.grid)&&(t.grid=t.grid.map(((e,n)=>{const o=i.dataToPoint(t.series[n].coordinates);return e.left=o[0]-parseFloat(e.width)/2,e.top=o[1]-parseFloat(e.height)/2,e}))),e},pie:function(t,e,i){return e.center=i.dataToPoint(e.coordinates),e}});const tt={forcedRerender:!1,forcedPrecomposeRerender:!1,hideOnZooming:!1,hideOnMoving:!1,hideOnRotating:!1,convertTypes:["pie","line","bar"],insertFirst:!1,stopEvent:!1,polyfillEvents:function(t,e){const i=t.split("."),n=e.split(".");for(let o=0;o<3;o++){const t=Number(i[o]),e=Number(n[o]);if(t>e)return 1;if(e>t)return-1;if(!isNaN(t)&&isNaN(e))return 1;if(isNaN(t)&&!isNaN(e))return-1}return 0}(x.xv,"6.1.1")<=0};class et extends v.A{static#t=(()=>this.formatGeoJSON=K)();static#e=(()=>this.bind=q)();static#i=(()=>this.merge=j)();static#n=(()=>this.uuid=U)();static#o=(()=>this.bindAll=B)();static#s=(()=>this.arrayAdd=G)();static#r=(()=>this.removeNode=H)();static#a=(()=>this.isObject=I)();constructor(t,e,i){const n=Object.assign(tt,e);super(n),this._options=n,this._chartOptions=t,this.set("chartOptions",t),this.$chart=null,this.$container=void 0,this._isRegistered=!1,this._initEvent=!1,this._incremental=[],this._coordinateSystem=null,this.coordinateSystemId="",this.prevVisibleState="",B(["redraw","onResize","onZoomStart","onZoomEnd","onCenterChange","onDragRotateEnd","onMoveStart","onMoveEnd","mouseDown","mouseUp","onClick","mouseMove"],this),i&&this.setMap(i)}appendTo(t,e){void 0===e&&(e=!1),this.setMap(t,e)}getMap(){return this._map}setMap(t,e){if(void 0===e&&(e=!1),!t||!(e||t instanceof w.A))throw new Error("not ol map object");this._map=t,this._map.once("postrender",(()=>{this.handleMapChanged()})),this._map.renderSync()}getChartOptions(){return this.get("chartOptions")}setChartOptions(t){return void 0===t&&(t={}),this._chartOptions=t,this.set("chartOptions",t),this.clearAndRedraw(),this}appendData(t,e){return void 0===e&&(e=!0),t&&(e&&(this._incremental=G(this._incremental,{index:this._incremental.length,data:t.data,seriesIndex:t.seriesIndex})),this.$chart.appendData({data:t.data.copyWithin(),seriesIndex:t.seriesIndex})),this}clear(t){t||(this._incremental=[]),this.$chart&&this.$chart.clear()}remove(){this.clear(),this.$chart&&this.$chart.dispose(),this._initEvent&&this.$container&&(this.$container&&H(this.$container),this.unBindEvent()),delete this.$chart,delete this._map}show(){this.setVisible(!0)}innerShow(){this.$container&&(this.$container.style.display=this.prevVisibleState,this.prevVisibleState="")}hide(){this.setVisible(!1)}innerHide(){this.$container&&(this.prevVisibleState=this.$container.style.display,this.$container.style.display="none")}isVisible(){return this.$container&&"none"!==this.$container.style.display}showLoading(){this.$chart&&this.$chart.showLoading()}hideLoading(){this.$chart&&this.$chart.hideLoading()}setZIndex(t){this.$container&&("number"==typeof t&&(t=String(t)),this.$container.style.zIndex=t)}getZIndex(){return this.$container&&this.$container.style.zIndex}setVisible(t){t?(this.$container&&(this.$container.style.display=""),this._chartOptions=this.getChartOptions(),this.clearAndRedraw()):(this.$container&&(this.$container.style.display="none"),this.clear(!0),this._chartOptions={},this.clearAndRedraw())}render(){!this.$chart&&this.$container?(this.$chart=m.init(this.$container),this._chartOptions&&(this.registerMap(),this.$chart.setOption(this.convertData(this._chartOptions),!1)),this.dispatchEvent({type:"load",source:this,value:this.$chart})):this.isVisible()&&this.redraw()}redraw(){this.clearAndRedraw()}updateViewSize(t){this.$container&&t&&(this.$container.style.width=`${t[0]}px`,this.$container.style.height=`${t[1]}px`,this.$container.setAttribute("width",String(t[0])),this.$container.setAttribute("height",String(t[1])))}onResize(t){const e=this.getMap();if(e){const i=e.getSize();this.updateViewSize(i),this.clearAndRedraw(),t&&this.dispatchEvent({type:"change:size",source:this,value:i})}}onZoomStart(){this._options.hideOnZooming&&this.innerHide();const t=this.getMap();t&&t.getView()&&this.dispatchEvent({type:"zoomstart",source:this,value:t.getView().getZoom()})}onZoomEnd(){this._options.hideOnZooming&&this.innerShow();const t=this.getMap();t&&t.getView()&&(this.clearAndRedraw(),this.dispatchEvent({type:"zoomend",source:this,value:t.getView().getZoom()}))}onDragRotateEnd(){this._options.hideOnRotating&&this.innerShow();const t=this.getMap();t&&t.getView()&&(this.clearAndRedraw(),this.dispatchEvent({type:"change:rotation",source:this,value:t.getView().getRotation()}))}onMoveStart(t){const e=this.getMap();if(!e||!e.getView())return;t.frameState.viewState.zoom!==e.getView().getZoom()?this.onZoomStart():this.onZoomEnd(),this._options.hideOnMoving&&this.innerHide(),this.dispatchEvent({type:"movestart",source:this,value:e.getView().getCenter()})}onMoveEnd(t){this._options.hideOnMoving&&this.innerShow();const e=this.getMap();if(!e||!e.getView())return;t.frameState.viewState.zoom===e.getView().getZoom()&&this.onZoomEnd(),this.clearAndRedraw(),this.dispatchEvent({type:"moveend",source:this,value:e.getView().getCenter()})}onClick(t){this.$chart&&this.$chart.getZr().painter.getViewportRoot().dispatchEvent(J("click",t))}mouseDown(t){this.$chart&&this.$chart.getZr().painter.getViewportRoot().dispatchEvent(J("mousedown",t))}mouseUp(t){this.$chart&&this.$chart.getZr().painter.getViewportRoot().dispatchEvent(J("mouseup",t))}mouseMove(t){if(this.$chart){let e=t.originalEvent.target;for(;e;){if("ol-overlaycontainer-stopevent"===e.className)return void this.$chart.getZr().painter.getViewportRoot().dispatchEvent(J("mousemove",t));e=e.parentElement}}}onCenterChange(){const t=this.getMap();t&&t.getView()&&(this.clearAndRedraw(),this.dispatchEvent({type:"change:center",source:this,value:t.getView().getCenter()}))}handleMapChanged(){const t=this.getMap();if(this._initEvent&&this.$container&&(this.$container&&H(this.$container),this.unBindEvent()),this.$container||(this.createLayerContainer(),this.onResize(!1)),t){const e=this._options.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this._options.insertFirst?e.insertBefore(this.$container,e.childNodes[0]||null):e.appendChild(this.$container),this.render(),this.bindEvent(t)}}createLayerContainer(){this.$container=document.createElement("div"),this.$container.style.position="absolute",this.$container.style.top="0px",this.$container.style.left="0px",this.$container.style.right="0px",this.$container.style.bottom="0px",this.$container.style.pointerEvents="auto"}bindEvent(t){const e=t.getView();this._options.forcedPrecomposeRerender&&t.on("precompose",this.redraw),t.on("change:size",this.onResize),e.on("change:center",this.onCenterChange),e.on("change:rotation",this.onDragRotateEnd),t.on("movestart",this.onMoveStart),t.on("moveend",this.onMoveEnd),this._options.polyfillEvents&&(t.on("pointerdown",this.mouseDown),t.on("pointerup",this.mouseUp),t.on("pointermove",this.mouseMove),t.on("click",this.onClick)),this._initEvent=!0}unBindEvent(){const t=this.getMap();if(!t)return;const e=t.getView();e&&(t.un("precompose",this.redraw),t.un("change:size",this.onResize),e.un("change:center",this.onCenterChange),e.un("change:rotation",this.onDragRotateEnd),t.un("movestart",this.onMoveStart),t.un("moveend",this.onMoveEnd),this._options.polyfillEvents&&(t.un("pointerdown",this.mouseDown),t.un("pointerup",this.mouseUp),t.un("pointermove",this.mouseMove),t.un("click",this.onClick)),this._initEvent=!1)}clearAndRedraw(){if(this.$chart&&this.isVisible()){if(this._options.forcedRerender&&this.$chart.clear(),this.$chart.resize(),this._chartOptions&&(this.registerMap(),this.$chart.setOption(this.convertData(this._chartOptions),!1),this._incremental&&this._incremental.length>0))for(let t=0;t<this._incremental.length;t++)this.appendData(this._incremental[t],!1);this.dispatchEvent({type:"redraw",source:this})}}registerMap(){if(this._isRegistered||(this.coordinateSystemId=`openlayers_${U()}`,m.registerCoordinateSystem(this.coordinateSystemId,this.getCoordinateSystem(this._options)),this._isRegistered=!0),this._chartOptions){const t=this._chartOptions.series;if(t&&I(t)){const e=this._options.convertTypes;if(e)for(let i=t.length-1;i>=0;i--)e.indexOf(t[i].type)>-1||(t[i].coordinateSystem=this.coordinateSystemId),t[i].animation=!1}}}convertData(t){const e=t.series;if(e&&e.length>0){if(!this._coordinateSystem){const t=this.getCoordinateSystem(this._options);this._coordinateSystem=new t(this.getMap())}if(e&&I(e)){const i=this._options.convertTypes;if(i)for(let n=e.length-1;n>=0;n--){const{type:o}=e[n];i.indexOf(o)>-1&&e[n]&&e[n].hasOwnProperty("coordinates")&&(e[n]=Q[e[n].type](t,e[n],this._coordinateSystem))}}}return t}getCoordinateSystem(t){const e=this.getMap(),i=this.coordinateSystemId;class n{constructor(t){this._mapOffset=[0,0],this.dimensions=["lng","lat"],this._roamTransformable=new O,this._rawTransformable=new O,this.map=t,this.dimensions=["lng","lat"],this.projCode=n.getProjectionCode(this.map)}static#t=(()=>this.dimensions=n.prototype.dimensions||["lng","lat"])();static#e=(()=>this.create=function(t){t.eachSeries((t=>{t.get("coordinateSystem")===i&&(t.coordinateSystem=new n(e))}))})();static#i=(()=>this.getProjectionCode=function(t){let e="";return e=t?t.getView()&&t.getView().getProjection().getCode():"EPSG:3857",e})();getZoom(){return this.map.getView().getZoom()}setZoom(t){return this.map.getView().setZoom(t)}getViewRectAfterRoam(){return this.getViewRect().clone()}setMapOffset(t){this._mapOffset=t}dataToPoint(e){let i;if(e&&Array.isArray(e)&&e.length>0){i=e.map((t=>{let e=0;return e="string"==typeof t?Number(t):t,e}));const n=t&&t.source||"EPSG:4326",o=t&&t.destination||this.projCode,s=this.map.getPixelFromCoordinate((0,g.pd)(i,n,o)),r=this._mapOffset;return[s[0]-r[0],s[1]-r[1]]}return[0,0]}pointToData(t){const e=this._mapOffset;return this.map.getCoordinateFromPixel([t[0]+e[0],t[1]+e[1]])}setViewRect(){const t=this.map.getSize();this._viewRect=new D(0,0,t[0],t[1])}getViewRect(){return this._viewRect||this.setViewRect(),this._viewRect}getRoamTransform(){return this._roamTransformable.getLocalTransform()}prepareCustoms(){const t=this.getViewRect();return{coordSys:{type:i,x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:q(this.dataToPoint,this),size:q(this.dataToCoordsSize,this)}}}dataToCoordsSize(t,e){return void 0===e&&(e=[0,0]),[0,1].map((i=>{const n=e[i],o=[],s=[],r=t[i]/2;o[i]=n-r,s[i]=n+r,o[1-i]=e[1-i],s[1-i]=e[1-i];const a=this.dataToPoint(o)[i]-this.dataToPoint(s)[i];return Math.abs(a)}))}getTransformInfo(){const t=this._rawTransformable,e=this._roamTransformable,i=new O;return i.transform=e.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}}}return n}dispatchEvent(t){return super.dispatchEvent(t)}set(t,e,i){return super.set(t,e,i)}get(t){return super.get(t)}on(t,e){return super.on(t,e)}un(t,e){return super.un(t,e)}}var it=i(1975);const nt={React:n,...n,useBaseUrl:it.Ay,proj4:r.A,ol:s,TileLayer:a.A,XYZ:c.A,VectorSource:p.A,VectorLayer:h.A,GeoJSON:u.A,Stroke:d.A,Fill:y.A,Style:l.Ay,echarts:m,EChartsLayer:et,Projection:g.MF,register:f.kz,leva:o,Leva:o.Leva,LevaPanel:o.LevaPanel}}}]);